# Archived Roadmap: v1.0-analysis-complete

**Archived:** 2026-02-17
**Timeline:** 2026-02-07 → 2026-02-13 (7 days)
**Commits:** 89 | **Files:** 146 | **LOC:** +64,592

## Accomplishments

1. Built reproducible ENAHO data pipeline (150,135 rows, 6 years, 25 model features) with P300A harmonization and spatial enrichment
2. Trained and calibrated LightGBM achieving PR-AUC=0.2611, with Platt scaling reducing Brier by 45.3% and ONNX export for browser inference
3. Revealed FNR-FPR trade-off: indigenous students over-flagged (FPR=0.537) while castellano speakers systematically missed (FNR=0.639)
4. SHAP analysis demonstrated dropout prediction driven by spatial/structural features (age, literacy, nightlights, poverty), not identity features
5. Confirmed algorithm-independence (LightGBM vs XGBoost ratio=1.0006) ensuring fairness findings generalize
6. Distilled 7 bilingual media-ready findings with validated metric_source paths for M4 scrollytelling site

## Phases

- [x] **Phase 0: Environment Setup** - Nix flake, pyproject.toml, download script, directory structure, .gitignore
- [x] **Phase 1: ENAHO Single-Year Loader** - Load 2023 ENAHO with delimiter detection, dropout target, UBIGEO padding
- [x] **Phase 2: Multi-Year Loader + Harmonization** - Load 6 years (2018-2023), P300A mother tongue harmonization
- [x] **Phase 3: Spatial + Supplementary Data Merges** - Admin dropout rates, Census 2017, VIIRS nightlights, LEFT JOIN on UBIGEO
- [x] **Phase 4: Feature Engineering + Descriptive Statistics** - 25 model features, survey-weighted descriptive gaps, first export
- [x] **Phase 5: Baseline Model + Temporal Splits** - Temporal split discipline, logistic regression baseline, evaluation patterns
- [x] **Phase 6: LightGBM + XGBoost** - Optuna-tuned LightGBM, XGBoost comparison, algorithm-independence check
- [x] **Phase 7: Calibration + ONNX Export + Final Test** - Calibrate best model, ONNX export, test set (2023) touched once
- [x] **Phase 8: Subgroup Fairness Metrics** - fairlearn MetricFrame across 7 dimensions + 3 intersections
- [x] **Phase 9: SHAP Interpretability Analysis** - Global/regional/interaction SHAP, ES_PERUANO + ES_MUJER quantification
- [x] **Phase 10: Cross-Validation with Admin Data** - District-level prediction vs admin rates, spatial error patterns
- [x] **Phase 11: Findings Distillation + Final Exports** - 7 bilingual findings, all 7 JSON exports, export README

## Stats

| Metric | Value |
|--------|-------|
| Phases | 12 (0-11) |
| Plans | 15 |
| Gate tests | 95 (12 files) |
| Exports | 7 (findings, fairness, SHAP, choropleth, model_results, descriptive, ONNX) |
| Figures | 16 PNG visualizations |

## Known Deviations

- ENAHO 2024 unavailable — test year shifted to 2023
- Synthetic admin/census/nightlights data (datosabiertos.gob.pe 404)
- Harmonization stability ratio 1.53x (spec said <1.3x, adopted 2.0x threshold)
- LR vs SHAP top-5 overlap: 0/5 (expected paradigm difference)
- Calibrated probs max 0.431 (Platt compression); used uncalibrated >0.7 for high-risk analysis
